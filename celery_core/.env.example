# PixCrawler Celery Core Configuration
# Copy this file to .env and adjust values as needed

# Broker Configuration
PIXCRAWLER_CELERY_BROKER_URL=redis://localhost:6379/0
PIXCRAWLER_CELERY_RESULT_BACKEND=redis://localhost:6379/1

# Basic Settings
PIXCRAWLER_CELERY_TIMEZONE=UTC
PIXCRAWLER_CELERY_ENABLE_UTC=true
PIXCRAWLER_CELERY_TASK_SERIALIZER=json
PIXCRAWLER_CELERY_RESULT_SERIALIZER=json

# Task Settings
PIXCRAWLER_CELERY_TASK_TIME_LIMIT=1800
PIXCRAWLER_CELERY_TASK_SOFT_TIME_LIMIT=1500
PIXCRAWLER_CELERY_TASK_ACKS_LATE=true
PIXCRAWLER_CELERY_TASK_REJECT_ON_WORKER_LOST=true
PIXCRAWLER_CELERY_TASK_DEFAULT_RETRY_DELAY=60
PIXCRAWLER_CELERY_TASK_MAX_RETRIES=3

# Worker Settings
PIXCRAWLER_CELERY_WORKER_CONCURRENCY=4
PIXCRAWLER_CELERY_WORKER_PREFETCH_MULTIPLIER=1
PIXCRAWLER_CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
PIXCRAWLER_CELERY_WORKER_MAX_MEMORY_PER_CHILD=200000

# Result Settings
PIXCRAWLER_CELERY_RESULT_EXPIRES=3600
PIXCRAWLER_CELERY_RESULT_PERSISTENT=true

# Monitoring
PIXCRAWLER_CELERY_ENABLE_MONITORING=true
PIXCRAWLER_CELERY_FLOWER_PORT=5555
PIXCRAWLER_CELERY_WORKER_SEND_TASK_EVENTS=true
PIXCRAWLER_CELERY_TASK_SEND_SENT_EVENT=true

# Security
PIXCRAWLER_CELERY_WORKER_HIJACK_ROOT_LOGGER=false
PIXCRAWLER_CELERY_WORKER_LOG_COLOR=false

# Performance (Optional)
# PIXCRAWLER_CELERY_TASK_COMPRESSION=gzip
# PIXCRAWLER_CELERY_RESULT_COMPRESSION=gzip

# Queue Configuration
PIXCRAWLER_CELERY_DEFAULT_QUEUE=default
PIXCRAWLER_CELERY_TASK_DEFAULT_QUEUE=default

# Beat Schedule
PIXCRAWLER_CELERY_BEAT_SCHEDULE_ENABLED=false