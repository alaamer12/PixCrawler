# =============================================================================
# PIXCRAWLER BACKEND ENVIRONMENT CONFIGURATION (EXAMPLE)
# =============================================================================
# Copy this file to backend/.env and update with your actual values
# DO NOT commit backend/.env to version control!
# =============================================================================

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME="PixCrawler API"
APP_VERSION="1.0.0"
API_V1_PREFIX="/api/v1"
DEBUG=True
ENVIRONMENT=development

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO

# =============================================================================
# DATABASE CONFIGURATION - Supabase PostgreSQL
# =============================================================================
# Database provider and connection mode
DATABASE_PROVIDER=supabase
DATABASE_CONNECTION_MODE=session_pooler  # Options: session_pooler, transaction_pooler, direct

# Individual connection parameters (for Supabase session pooler)
# Replace with your actual Supabase credentials
DATABASE_HOST=db.your-project-ref.supabase.co
DATABASE_PORT=5432  # 5432 for session pooler, 6543 for transaction pooler
DATABASE_USER=postgres.your-project-ref
DATABASE_PASSWORD=your-database-password
DATABASE_NAME=postgres

# OR use connection URL (alternative to individual parameters)
# DATABASE_URL=postgresql://postgres.your-project-ref:your-password@db.your-project-ref.supabase.co:5432/postgres

# Connection pool settings
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=5
DATABASE_POOL_PRE_PING=True
DATABASE_ECHO=False
DATABASE_DISABLE_POOLER_WARNING=True

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
# IMPORTANT: Change SECRET_KEY in production to a secure random string (min 32 characters)
SECRET_KEY="dev-secret-key-change-in-production-min-32-characters-long"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# =============================================================================
# REDIS CONFIGURATION (Caching)
# =============================================================================
CACHE_ENABLED=False
CACHE_REDIS_HOST=localhost
CACHE_REDIS_PORT=6379
CACHE_REDIS_PASSWORD=
CACHE_REDIS_DB=0
CACHE_PREFIX=pixcrawler:cache
CACHE_DEFAULT_TTL=300

# =============================================================================
# REDIS CONFIGURATION (Rate Limiting)
# =============================================================================
LIMITER_ENABLED=False
LIMITER_REDIS_HOST=localhost
LIMITER_REDIS_PORT=6379
LIMITER_REDIS_PASSWORD=
LIMITER_REDIS_DB=1
LIMITER_PREFIX=pixcrawler:limiter
LIMITER_DEFAULT_TIMES=100
LIMITER_DEFAULT_SECONDS=60

# =============================================================================
# CELERY CONFIGURATION (Task Queue)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
# Maximum upload file size in bytes (10MB)
UPLOAD_MAX_SIZE=10485760

# Allowed file extensions (comma-separated)
UPLOAD_ALLOWED_EXTENSIONS=.jpg,.jpeg,.png,.gif,.webp

# =============================================================================
# STORAGE PROVIDER CONFIGURATION
# =============================================================================
# Storage provider (local, azure)
STORAGE_PROVIDER=local

# Local storage path (for development)
STORAGE_LOCAL_PATH=./storage

# =============================================================================
# AZURE BLOB STORAGE CONFIGURATION (Optional)
# =============================================================================
# Uncomment and configure if using Azure storage

# Azure storage connection string
#STORAGE_AZURE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=YOUR_ACCOUNT;AccountKey=YOUR_KEY;EndpointSuffix=core.windows.net

# Azure container name
#STORAGE_AZURE_CONTAINER_NAME=pixcrawler-storage

# Maximum retry attempts for Azure operations
#STORAGE_AZURE_MAX_RETRIES=3

# Enable archive tier for cost optimization
#STORAGE_AZURE_ENABLE_ARCHIVE_TIER=true

# Default storage tier (hot, cool, archive)
#STORAGE_AZURE_DEFAULT_TIER=hot

# =============================================================================
# NOTES
# =============================================================================
# 1. For Supabase session pooler, use port 5432 (supports prepared statements)
# 2. For Supabase transaction pooler, use port 6543 (no prepared statements)
# 3. You can use EITHER individual DATABASE_* parameters OR DATABASE_URL (not both)
# 4. The system will automatically construct the URL from individual parameters
# 5. Get your Supabase credentials from: Project Settings > API > Database
# 6. Change SECRET_KEY in production to a secure random string!
# =============================================================================
